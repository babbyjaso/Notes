It's where the computer stores code and data for a program to run.
- CPU accesses one instruction at a time
Programs only have access to it's alloted space in the memory
- this is called "abstraction"
![[Pasted image 20241006171006.png]]
Extremely basic breakdown of how the memory looks for a program
- positions of the blocks are arbitrary, they can be in different places
Main sections:
- ## Code ^mem-code
	- This is where the code lives
	- Is where the text section in a Portable Executable (PE) is
		- has the instructions executed by the CPU
	- Because of above, CPU has access to execute data here
- ## Data ^mem-data
	- Initialized data that is not variable
		- Constant data
	- The data section in a PE file
	- Often has Global variables and other constant data
- ## Heap ^mem-heap
	- Dynamic Memory
	- Variables and data created and destroyed during program execution
		- variable is created, memory is allocated at that time
		- variable is deleted, memory is freed
- ## Stack ^mem-stack
	- Important part when analyzing malware
	- Contains:
		- local variables
		- arguments passed onto the program
		- return address of the parent process
	- because of the return address, the stack is targeted by malware to control the flow
	- Last In First Out (LIFO)
	- CPU uses two registers to keep track of the stack
		- [[Assembly#^esp-rsp|Stack Pointer (ESP/RSP)]]
		- [[Assembly#^ebp-rbp|Base Pointer (EBP/RBP)]]
	- below the base pointer is the old base pointer of the calling program
		- sup dawg we heard you like programs, so we etc. etc.
		- ex: cmd calling the [[PEview#^win-api|WinAPI]] DownloadFromURL
	- below the calling program's base pointer is the return address
		- once the instruction pointer hits that, this is the end of the current program in a program
	- common technique: Stack Buffer Overflow ^stack-overflow
		- rewrite the return address to an address that has shellcode or some other malicious program
	- arguments are pushed onto the stack in preparation for the function to execute
		- it's why we can see a lot of variables being pushed onto the stack before a [[PEview#^win-api|WinAPI]] call
		- ![[Screenshot_20241006_180500.png]]
	- Return Address and Old Base Pointer are pushed
	- Base Pointer is changed to the top of the stack
	- Function executes
	- Stack pointer moves as the function is executing